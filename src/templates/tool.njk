{% extends "_layout.njk" %}
{% block head %}
<meta property="og:title" content="{{ tool.name }} — {{ tool.vendor }}">
<meta property="og:description" content="{{ tool.description | truncate(180, true, '…') }}">
<script type="application/ld+json">
{{ ldjson | dump(2) | safe }}
</script>
{% endblock %}
{% block content %}
<div class="container">
  <nav class="breadcrumb"><a href="/">Home</a> / <a href="/category/{{ primaryCategory }}/">{{ primaryCategory | replace('-', ' ') | title }}</a> / {{ tool.name }}</nav>
  <header class="tool-hero">
    <div class="tool-hero__badge">{{ tool.pricing | capitalize }} • {{ tool.adultLevel }}</div>
    <h1>{{ tool.name }}</h1>
    <p class="tool-hero__vendor">By {{ tool.vendor }} &middot; {{ tool.status | capitalize }}</p>
    <p class="tool-hero__description">{{ tool.description }}</p>
    <div class="tool-actions">
      <a class="btn btn-primary" href="{{ tool.links.homepage }}" rel="nofollow">Visit website</a>
      {% if tool.links.pricing %}<a class="btn btn-secondary" href="{{ tool.links.pricing }}" rel="nofollow">View pricing</a>{% endif %}
      {% if tool.links.docs %}<a class="btn btn-secondary" href="{{ tool.links.docs }}" rel="nofollow">Docs</a>{% endif %}
    </div>
  </header>

  <section class="tool-details">
    <div class="tool-panel">
      <h2>Snapshot</h2>
      <dl class="tool-meta">
        <dt>Adult level</dt>
        <dd>{{ tool.adultLevel }}</dd>
        <dt>Pricing</dt>
        <dd>{{ tool.pricing | capitalize }}</dd>
        <dt>Regions</dt>
        <dd>{{ tool.regions | join(', ') }}</dd>
        <dt>Status</dt>
        <dd>{{ tool.status | capitalize }}</dd>
        <dt>Updated</dt>
        <dd>{{ tool.updatedAt }}</dd>
      </dl>
    </div>
    <div class="tool-panel">
      <h2>Features</h2>
      <ul>
        {% for feature in tool.features %}
        <li>{{ feature }}</li>
        {% endfor %}
      </ul>
      {% if tool.tags | length %}
      <h3>Tags</h3>
      <ul class="pill-list">
        {% for tag in tool.tags %}
        <li class="pill">{{ tag }}</li>
        {% endfor %}
      </ul>
      {% endif %}
    </div>
    <div class="tool-panel">
      <h2>Compliance & Safety</h2>
      {% if tool.compliance | length %}
      <h3>Declared controls</h3>
      <ul>
        {% for item in tool.compliance %}
        <li>{{ item }}</li>
        {% endfor %}
      </ul>
      {% endif %}
      {% if tool.safetyNotes | length %}
      <h3>Notes</h3>
      <ul>
        {% for note in tool.safetyNotes %}
        <li>{{ note }}</li>
        {% endfor %}
      </ul>
      {% endif %}
      {% if tool.affiliate %}
      <h3>Affiliate program</h3>
      <dl class="tool-meta">
        {% if tool.affiliate.program %}<dt>Program</dt><dd>{{ tool.affiliate.program }}</dd>{% endif %}
        {% if tool.affiliate.terms %}<dt>Terms</dt><dd>{{ tool.affiliate.terms }}</dd>{% endif %}
        {% if tool.affiliate.payout %}<dt>Payout</dt><dd>{{ tool.affiliate.payout }}</dd>{% endif %}
        {% if tool.affiliate.cookieDays %}<dt>Cookie</dt><dd>{{ tool.affiliate.cookieDays }} days</dd>{% endif %}
      </dl>
      {% endif %}
    </div>
  </section>

  {% if alternatives | length %}
  <section class="alternatives">
    <h2>Alternatives worth exploring</h2>
    <div class="tool-grid">
      {% for alt in alternatives %}
      <article class="tool-card">
        <div class="tool-card__heading">
          <h3><a href="/tool/{{ alt.slug }}/">{{ alt.name }}</a></h3>
          <span class="tool-card__category">{{ alt.pricing | capitalize }}</span>
        </div>
        <p class="tool-card__meta">{{ alt.vendor }}</p>
        <p class="tool-card__description">{{ alt.description | truncate(160, true, '…') }}</p>
      </article>
      {% endfor %}
    </div>
  </section>
  {% endif %}
</div>
{% endblock %}
