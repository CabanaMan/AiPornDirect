{% extends "_layout.njk" %}

{% block head %}
{% if directoryLdjson %}
<script type="application/ld+json">
{{ directoryLdjson | dump(2) | safe }}
</script>
{% endif %}
{% endblock %}

{% block content %}
<section class="hero hero--directory">
  <div class="container">
    <div class="hero__surface">
      <div class="hero__content">
        <h1 class="hero__title">Best Adult AI Porn Sites Directory</h1>
        <p class="hero__description">AiPornDirect ranks the leading adult AI porn generators, NSFW chatbots, erotic companions, and deepfake makers with safety notes and pricing updated {{ lastUpdated or 'regularly' }}.</p>
        <ul class="hero__stats">
          <li>
            <span class="hero__stat-value">{{ sites | length }}</span>
            <span class="hero__stat-label">Sites indexed</span>
          </li>
          <li>
            <span class="hero__stat-value">{{ categories | length }}</span>
            <span class="hero__stat-label">Categories</span>
          </li>
          <li>
            <span class="hero__stat-value">{{ lastUpdated or '—' }}</span>
            <span class="hero__stat-label">Last verified</span>
          </li>
        </ul>
        <div class="hero__controls">
          <div class="search-bar">
            <label for="search" class="visually-hidden">Search AI porn sites</label>
            <input id="search" type="search" placeholder="Search by name, tag, or category" autocomplete="off">
          </div>
          <div class="filter-group" id="category-filter" data-categories='{{ categories | dump }}'>
            <button class="filter-chip is-active" data-category="all">All</button>
            {% for category in categories %}
            <button class="filter-chip" data-category="{{ category.id }}">{{ category.name }}</button>
            {% endfor %}
          </div>
        </div>
      </div>
      <aside class="hero__aside" aria-label="What\'s new">
        <span class="hero__badge">Directory notes</span>
        <ul class="hero__checklist">
          <li>Highlights summarise the selling points they call out.</li>

          <li>Tags and categories help you filter between generators, chatbots, and deepfakes.</li>
        </ul>
        <p class="hero__aside-note">Can\'t find something? <a href="mailto:submit@aiporndirect.com">Send us the missing site</a>.</p>
      </aside>
    </div>
  </div>
</section>
<section class="section section--directory" aria-live="polite">
  <div class="container">
    <div class="section-heading">
      <div>
        <h2 class="section-title">All AI porn sites</h2>
        <p class="section-subtitle">Browse verified NSFW AI tools, adult chatbots, and porn generators by ranking, rating, or freshness.</p>
      </div>
      <div class="section-actions">
        <div class="sort-control">
          <label class="sort-control__label" for="sort-order">Sort by</label>
          <select id="sort-order" class="sort-control__select">
            <option value="rank">Editor ranking</option>
            <option value="rating">Highest rating</option>
            <option value="votes">Most votes</option>
            <option value="alphabetical">A–Z</option>
            <option value="recent">Recently verified</option>
          </select>
        </div>
        <a class="section-link" href="mailto:submit@aiporndirect.com">Request an update →</a>
      </div>
    </div>
    {% if sites | length %}
    <div class="site-grid" id="site-grid">
      {% for site in sites %}
      <article class="site-card" data-slug="{{ site.slug }}" data-categories='{{ (site.categories or []) | dump }}' data-tags='{{ (site.tags or []) | dump }}' data-pricing="{{ site.pricing }}" data-rank="{{ site.rank or loop.index }}" data-rating="{{ site.rating if site.rating is not none else '' }}" data-votes="{{ site.votes if site.votes is not none else '' }}" data-name="{{ site.name }}" data-last-checked="{{ site.lastChecked or '' }}">
        <header class="site-card__header">
          <div class="site-card__meta">
            <span class="site-card__rank">#{{ site.rank or loop.index }}</span>
            <h3><a href="/site/{{ site.slug }}/">{{ site.name }}</a></h3>
          </div>
          <div class="site-card__rating" aria-label="Rating">
            {% if site.rating %}
            <span class="site-card__score">{{ site.rating }}<small>/100</small></span>
            {% else %}
            <span class="site-card__score is-na">N/A</span>
            {% endif %}
            {% if site.votes %}
            <span class="site-card__votes">{{ site.votes }} votes</span>
            {% endif %}
          </div>
        </header>
        <p class="site-card__summary">{{ site.summary }}</p>
        {% if site.highlights %}
        <ul class="site-card__highlights">
          {% for highlight in site.highlights %}
          <li>{{ highlight }}</li>
          {% endfor %}
        </ul>
        {% endif %}
        <div class="site-card__footer">
          <ul class="pill-list">
            <li class="pill">{{ site.pricing | capitalize }}</li>
            {% for category in site.categories %}
            <li class="pill pill--muted">{{ category | title }}</li>
            {% endfor %}
          </ul>
          <div class="site-card__actions">
            <a class="btn btn-secondary" href="/site/{{ site.slug }}/">Profile</a>
            <a class="btn btn-primary" href="{{ site.website | safe }}" rel="noopener" target="_blank">Visit →</a>
          </div>
        </div>
      </article>
      {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
      <h3>No listings yet</h3>

    </div>
    {% endif %}
  </div>
</section>
{% endblock %}
