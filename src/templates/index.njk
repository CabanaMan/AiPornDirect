{% extends "_layout.njk" %}
{% set title = 'AiPornDirect — Complete AI porn site mirror' %}
{% set description = 'Browse every AI porn generator, chatbot, and deepfake studio mirrored from the user-supplied ranking, with filters, highlights, and direct links.' %}
{% set topSites = sites | slice(0, 5) %}
{% block content %}
<section class="masthead">
  <div class="container">
    <div class="masthead__surface">
      <div class="masthead__copy">
        <span class="masthead__tag">Full mirror</span>
        <h1 class="masthead__title">Complete AI porn sites ranking</h1>
        <p class="masthead__lead">AiPornDirect mirrors the entire AI porn list provided by the user. Every generator, chatbot, and swap studio keeps the original ranking order so you can compare quickly without the legacy clutter.</p>
        <div class="stats-bar">
          <div class="stats-card">
            <span class="stats-card__value">{{ sites | length }}</span>
            <span class="stats-card__label">Sites tracked</span>
          </div>
          <div class="stats-card">
            <span class="stats-card__value">{{ categories | length }}</span>
            <span class="stats-card__label">Categories</span>
          </div>
          <div class="stats-card">
            <span class="stats-card__value">{{ lastUpdated or '—' }}</span>
            <span class="stats-card__label">Last verified</span>
          </div>
        </div>
        <div class="masthead__controls">
          <div class="search-bar">
            <label for="search" class="visually-hidden">Search AI porn sites</label>
            <input id="search" type="search" placeholder="Search by name, tag, or category" autocomplete="off">
          </div>
          <div class="filter-group" id="category-filter" data-categories='{{ categories | dump }}'>
            <button class="filter-chip is-active" data-category="all">All</button>
            {% for category in categories %}
            <button class="filter-chip" data-category="{{ category.id }}">{{ category.name }}</button>
            {% endfor %}
          </div>
        </div>
      </div>
      <aside class="masthead__aside" aria-label="Top ranked listings">
        <span class="masthead__board-title">Current top ranks</span>
        <ul class="masthead__board">
          {% for entry in topSites %}
          <li class="board-item">
            <span class="board-rank">#{{ entry.rank or loop.index }}</span>
            <div>
              <a class="board-name" href="/site/{{ entry.slug }}/">{{ entry.name }}</a>
              <span class="board-url">{{ entry.website | replace('https://', '') | replace('http://', '') }}</span>
            </div>
          </li>
          {% endfor %}
        </ul>
        <p class="masthead__lead">Missing something? <a href="mailto:submit@aiporndirect.com">Send us the site and we will mirror it.</a></p>
      </aside>
    </div>
  </div>
</section>
<section class="directory" aria-live="polite">
  <div class="container">
    <div class="section-heading">
      <div>
        <h2 class="section-title">All AI porn sites</h2>
        <p class="section-subtitle">Sorted exactly like the source list so you can scroll the complete mirror with richer metadata.</p>
      </div>
      <a class="section-link" href="mailto:submit@aiporndirect.com">Request an update →</a>
    </div>
    {% if sites | length %}
    <div class="directory-controls">
      <div class="filter-group" id="pricing-filter" aria-label="Filter by pricing">
        <button class="filter-chip is-active" data-pricing="all">All pricing</button>
        <button class="filter-chip" data-pricing="free">Free</button>
        <button class="filter-chip" data-pricing="freemium">Freemium</button>
        <button class="filter-chip" data-pricing="subscription">Subscription</button>
        <button class="filter-chip" data-pricing="paid">Paid</button>
      </div>
    </div>
    <div class="directory-list" id="site-grid">
      {% for site in sites %}
      <article class="listing" data-slug="{{ site.slug }}" data-categories='{{ site.categories | dump }}' data-tags='{{ site.tags | dump }}' data-pricing="{{ site.pricing }}">
        <header class="listing__header">
          <span class="listing__rank">#{{ site.rank or loop.index }}</span>
          <div class="listing__identity">
            <h3><a href="/site/{{ site.slug }}/">{{ site.name }}</a></h3>
            <p class="listing__url">{{ site.website | replace('https://', '') | replace('http://', '') }}</p>
          </div>
          <div class="listing__meta" aria-label="Rating and pricing">
            {% if site.rating %}
            <span class="listing__score">{{ site.rating }}<small>/100</small></span>
            {% else %}
            <span class="listing__score">N/A</span>
            {% endif %}
            <span class="listing__pricing">{{ site.pricing | capitalize }}</span>
          </div>
        </header>
        <div class="listing__body">
          <p>{{ site.summary }}</p>
          <ul class="listing__tags">
            <li class="pill pill--accent">{{ site.pricing | capitalize }}</li>
            {% for category in site.categories %}
            <li class="pill">{{ category | replace('-', ' ') | title }}</li>
            {% endfor %}
            {% for tag in site.tags or [] %}
            <li class="pill pill--muted">{{ tag }}</li>
            {% endfor %}
          </ul>
        </div>
        <footer class="listing__footer">
          {% if site.highlights %}
          <ul class="listing__highlights">
            {% for highlight in site.highlights %}
            <li>{{ highlight }}</li>
            {% endfor %}
          </ul>
          {% endif %}
          <div class="listing__actions">
            <a class="btn btn-secondary" href="/site/{{ site.slug }}/">Profile</a>
            <a class="btn btn-primary" href="{{ site.website }}" rel="noopener" target="_blank">Visit →</a>
          </div>
        </footer>
      </article>
      {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
      <h3>No listings yet</h3>
      <p>Populate <code>src/data/sites.json</code> with the mirrored AI porn sites and rebuild the project to see them here.</p>
    </div>
    {% endif %}
  </div>
</section>
{% endblock %}
